{"ast":null,"code":"/**\n * Extend proto.\n */\nmodule.exports = function (proto) {\n  var exifTransforms = {\n    topleft: '',\n    topright: ['-flop'],\n    bottomright: ['-rotate', 180],\n    bottomleft: ['-flip'],\n    lefttop: ['-flip', '-rotate', 90],\n    righttop: ['-rotate', 90],\n    rightbottom: ['-flop', '-rotate', 90],\n    leftbottom: ['-rotate', 270]\n  };\n\n  proto.autoOrient = function autoOrient() {\n    // Always strip EXIF data since we can't\n    // change/edit it.\n    // imagemagick has a native -auto-orient option\n    // so does graphicsmagick, but in 1.3.18.\n    // nativeAutoOrient option enables this if you know you have >= 1.3.18\n    if (this._options.nativeAutoOrient || this._options.imageMagick) {\n      this.out('-auto-orient');\n      this.strip();\n      return this;\n    }\n\n    this.preprocessor(function (callback) {\n      this.orientation({\n        bufferStream: true\n      }, function (err, orientation) {\n        if (err) return callback(err);\n        var transforms = exifTransforms[orientation.toLowerCase()];\n\n        if (transforms) {\n          // remove any existing transforms that might conflict\n          var index = this._out.indexOf(transforms[0]);\n\n          if (~index) {\n            this._out.splice(index, transforms.length);\n          } // repage to fix coordinates\n\n\n          this._out.unshift.apply(this._out, transforms.concat('-page', '+0+0'));\n        }\n\n        this.strip();\n        callback();\n      });\n    });\n    return this;\n  };\n};","map":{"version":3,"sources":["/home/a/Documents/GitHub/react-ts-project/node_modules/gm/lib/convenience/autoOrient.js"],"names":["module","exports","proto","exifTransforms","topleft","topright","bottomright","bottomleft","lefttop","righttop","rightbottom","leftbottom","autoOrient","_options","nativeAutoOrient","imageMagick","out","strip","preprocessor","callback","orientation","bufferStream","err","transforms","toLowerCase","index","_out","indexOf","splice","length","unshift","apply","concat"],"mappings":"AACA;AACA;AACA;AAEAA,MAAM,CAACC,OAAP,GAAiB,UAAUC,KAAV,EAAiB;AAEhC,MAAIC,cAAc,GAAG;AACjBC,IAAAA,OAAO,EAAM,EADI;AAEjBC,IAAAA,QAAQ,EAAK,CAAC,OAAD,CAFI;AAGjBC,IAAAA,WAAW,EAAE,CAAC,SAAD,EAAY,GAAZ,CAHI;AAIjBC,IAAAA,UAAU,EAAG,CAAC,OAAD,CAJI;AAKjBC,IAAAA,OAAO,EAAM,CAAC,OAAD,EAAU,SAAV,EAAqB,EAArB,CALI;AAMjBC,IAAAA,QAAQ,EAAK,CAAC,SAAD,EAAY,EAAZ,CANI;AAOjBC,IAAAA,WAAW,EAAE,CAAC,OAAD,EAAU,SAAV,EAAqB,EAArB,CAPI;AAQjBC,IAAAA,UAAU,EAAG,CAAC,SAAD,EAAY,GAAZ;AARI,GAArB;;AAWAT,EAAAA,KAAK,CAACU,UAAN,GAAmB,SAASA,UAAT,GAAuB;AACxC;AACA;AAEA;AACA;AACA;AACA,QAAI,KAAKC,QAAL,CAAcC,gBAAd,IAAkC,KAAKD,QAAL,CAAcE,WAApD,EAAiE;AAC/D,WAAKC,GAAL,CAAS,cAAT;AACA,WAAKC,KAAL;AACA,aAAO,IAAP;AACD;;AAED,SAAKC,YAAL,CAAkB,UAAUC,QAAV,EAAoB;AACpC,WAAKC,WAAL,CAAiB;AAACC,QAAAA,YAAY,EAAE;AAAf,OAAjB,EAAuC,UAAUC,GAAV,EAAeF,WAAf,EAA4B;AACjE,YAAIE,GAAJ,EAAS,OAAOH,QAAQ,CAACG,GAAD,CAAf;AAET,YAAIC,UAAU,GAAGpB,cAAc,CAACiB,WAAW,CAACI,WAAZ,EAAD,CAA/B;;AACA,YAAID,UAAJ,EAAgB;AAEd;AACA,cAAIE,KAAK,GAAG,KAAKC,IAAL,CAAUC,OAAV,CAAkBJ,UAAU,CAAC,CAAD,CAA5B,CAAZ;;AACA,cAAI,CAACE,KAAL,EAAY;AACV,iBAAKC,IAAL,CAAUE,MAAV,CAAiBH,KAAjB,EAAwBF,UAAU,CAACM,MAAnC;AACD,WANa,CAQd;;;AACA,eAAKH,IAAL,CAAUI,OAAV,CAAkBC,KAAlB,CAAwB,KAAKL,IAA7B,EAAmCH,UAAU,CAACS,MAAX,CAAkB,OAAlB,EAA2B,MAA3B,CAAnC;AACD;;AAED,aAAKf,KAAL;AAEAE,QAAAA,QAAQ;AACT,OAnBD;AAoBD,KArBD;AAuBA,WAAO,IAAP;AACD,GArCD;AAsCD,CAnDD","sourcesContent":["\n/**\n * Extend proto.\n */\n\nmodule.exports = function (proto) {\n\n  var exifTransforms = {\n      topleft:     ''\n    , topright:    ['-flop']\n    , bottomright: ['-rotate', 180]\n    , bottomleft:  ['-flip']\n    , lefttop:     ['-flip', '-rotate', 90]\n    , righttop:    ['-rotate', 90]\n    , rightbottom: ['-flop', '-rotate', 90]\n    , leftbottom:  ['-rotate', 270]\n  }\n\n  proto.autoOrient = function autoOrient () {\n    // Always strip EXIF data since we can't\n    // change/edit it.\n\n    // imagemagick has a native -auto-orient option\n    // so does graphicsmagick, but in 1.3.18.\n    // nativeAutoOrient option enables this if you know you have >= 1.3.18\n    if (this._options.nativeAutoOrient || this._options.imageMagick) {\n      this.out('-auto-orient');\n      this.strip();\n      return this;\n    }\n\n    this.preprocessor(function (callback) {\n      this.orientation({bufferStream: true}, function (err, orientation) {\n        if (err) return callback(err);\n\n        var transforms = exifTransforms[orientation.toLowerCase()];\n        if (transforms) {\n\n          // remove any existing transforms that might conflict\n          var index = this._out.indexOf(transforms[0]);\n          if (~index) {\n            this._out.splice(index, transforms.length);\n          }\n\n          // repage to fix coordinates\n          this._out.unshift.apply(this._out, transforms.concat('-page', '+0+0'));\n        }\n\n        this.strip();\n\n        callback();\n      });\n    });\n\n    return this;\n  }\n}\n"]},"metadata":{},"sourceType":"script"}