(this["webpackJsonpmy-project"]=this["webpackJsonpmy-project"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var s=n(0),o=n(1),c=n(4),r=n.n(c),i=(n(13),n(2)),a=(n(14),"http://192.168.0.16:5000/"),l={},u=function(e){var t=Object(o.useState)({picture:null,loading:!0}),n=Object(i.a)(t,2),s=n[0],c=n[1];return Object(o.useEffect)((function(){var t={name:e};console.log("GetProfileImage: bodyContent: ",t),c((function(e){return{picture:e.picture,loading:!0}})),fetch(a+"getprofileimage",{method:"POST",headers:l,credentials:"same-origin",body:JSON.stringify(t)}).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){console.log("GetProfileImage: json data: ",e),c({picture:e,loading:!1})}))}),[e]),s},d=function(e){var t=Object(o.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1];return Object(s.jsx)("div",{className:"inputs",children:Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{type:"text",className:"sendInput textInput",onChange:function(e){r(e.target.value)}}),Object(s.jsx)("button",{type:"button",className:"sendButton button",onClick:function(){!function(e,t,n){console.log("This is the texxt content: "+n);var s={sender:e,receiver:t,content:n};fetch(a+"addmessage",{method:"POST",headers:l,credentials:"same-origin",body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){return console.log("PostRequest: ",e),e}))}(e.valueUser,e.receiver,c)},children:" Send "})]})})},g=function(e){var t=e.data.sender,n=e.data.content,o=e.user;return Object(s.jsx)("div",{className:"message ".concat(o===t?"messageRigth":"messageLeft"),children:n})},j=function(e){var t=function(e,t){var n=Object(o.useState)({messages:null,loading:!0}),s=Object(i.a)(n,2),c=s[0],r=s[1];return Object(o.useEffect)((function(){var n={sender:e,receiver:t};r((function(e){return{messages:e.messages,loading:!0}})),fetch("http://localhost:5000/getwithfilter",{method:"POST",headers:l,credentials:"same-origin",body:JSON.stringify(n)}).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){console.log("GetWithFilter: json data: ",e),r({messages:e,loading:!1})}))}),[t,e]),c}(e.sender,e.receiver).messages;return console.log("MessagesAll: data: ",t),console.log(t),""==e.receiver?Object(s.jsx)("div",{className:"messages",children:Object(s.jsx)("span",{className:"noMessagesText",children:"To start chatting select a receiver"})}):Object(s.jsxs)("div",{className:"messages",children:[Object(s.jsxs)("h3",{children:[e.receiver," "]}),t?t.map((function(t){return Object(s.jsx)(g,{data:t,user:e.valueUser},t._id)})):"loading"]})},f=function(e){var t=Object(o.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1];return Object(s.jsxs)("div",{className:"friendAdd",children:[Object(s.jsx)("input",{className:"friendAddInput textInput",type:"text",onChange:function(e){r(e.target.value)},placeholder:"Friend Name"}),Object(s.jsx)("button",{type:"button",className:"friendAddButton button",onClick:function(){!function(e,t){var n={name:e,newFriend:t};console.log("AddFriendRequest: ",n),fetch("http://192.168.0.16:5000/addfriendrequest",{method:"POST",headers:l,credentials:"same-origin",body:JSON.stringify(n)}).then((function(e){return console.log("AddFriendRequest: ",e),e}))}(e.user,c),e.toggleFriendAdded()},children:"Add friend"})]})},b=function(e){var t=Object(o.useState)(localStorage.getItem("user")),n=Object(i.a)(t,2),c=n[0],r=n[1],a=Object(o.useState)(void 0),u=Object(i.a)(a,2),d=u[0],g=u[1],j=Object(o.useState)(""),f=Object(i.a)(j,2),b=f[0],O=f[1],h=Object(o.useState)(""),m=Object(i.a)(h,2),v=m[0],x=m[1],p=Object(o.useState)(""),N=Object(i.a)(p,2),S=N[0],y=N[1],U=Object(o.useState)(void 0),C=Object(i.a)(U,2),L=C[0],F=C[1],R=function(e,t){var n=Object(o.useState)({successfulLogin:null,loginLoading:!0}),s=Object(i.a)(n,2),c=s[0],r=s[1];return Object(o.useEffect)((function(){var n={name:e,pass:t};console.log("Login: bodyContent: ",n),r((function(e){return{successfulLogin:null,loginLoading:!0}})),fetch("http://192.168.0.16:5000/login",{method:"POST",headers:l,credentials:"same-origin",body:JSON.stringify(n)}).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){console.log("UserLogin: json data",e),null!=e&&(console.log("UserLogin: json set"),r({successfulLogin:e,loginLoading:!1}))}))}),[t]),c}(c,v),I=R.loginLoading,T=R.successfulLogin,A=function(e){var t=Object(o.useState)({doesUserExist:null,registerLoading:!0}),n=Object(i.a)(t,2),s=n[0],c=n[1];return Object(o.useEffect)((function(){var t={name:e};console.log("DoesUserExist: bodyContent: ",t,e),c({doesUserExist:null,registerLoading:!0}),fetch("http://192.168.0.16:5000/doesuserexist",{method:"POST",headers:l,credentials:"same-origin",body:JSON.stringify(t)}).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(t){console.log("DoesUserExist: json data",t,e),c({doesUserExist:t,registerLoading:!1})}))}),[e]),s}(S),P=A.doesUserExist,q=A.registerLoading;return Object(o.useEffect)((function(){console.log("LoginInputs: sendLogin: loading, successfulLogin",I,T),I||(T?(console.log("LoginInputs: sendLogin: successfully",T),e.login(c),e.toggleAlreadySet()):(F(!0),g(!1)),T=null)}),[T]),console.log(P),Object(o.useEffect)((function(){console.log("LoginInputs: sendRegister: loading, doesuserExist",q,P),q||(P?(g(!0),F(!1)):(console.log("LoginInputs: storeUser",c),""!==c&&"null"!==c&&(g(!1),console.log("LoginInputs: SendInput: doesUserExist ",P),e.saveUser(c,b),e.toggleAlreadySet())))}),[P]),Object(s.jsxs)("div",{className:"logins",children:[Object(s.jsx)("input",{type:"text",onChange:function(e){r(e.target.value)},className:"loginTextInput textInput",placeholder:"Username"}),Object(s.jsx)("input",{type:"text",onChange:function(e){O(e.target.value)},className:"loginTextInput textInput",placeholder:"Password"}),Object(s.jsx)("button",{type:"button",onClick:function(){x(b)},className:"loginButtons button",children:"Login"}),Object(s.jsx)("button",{type:"button",onClick:function(){y(c)},className:"loginButtons button",children:"Register"}),Object(s.jsxs)("span",{className:"userExistsWarning",children:[" ",void 0!==d&&d?"User already exists \u274c":""," "]}),Object(s.jsxs)("span",{className:"userExistsWarning",children:[" ",void 0!==L&&L?"Wrong Password or username \u274c":""," "]})]})},O=function(e){var t=function(t){!function(e,t){var n={name:e,newFriend:t};console.log("AddFriend: ",n),fetch("http://192.168.0.16:5000/addfriend",{method:"POST",headers:l,credentials:"same-origin",body:JSON.stringify(n)}).then((function(e){return console.log("AddFriend: ",e),e}))}(e.valueUser,t)},n=function(t){!function(e,t){var n={name:e,FriendToRemove:t};console.log("RemoveFriendRequest: ",n),fetch("http://192.168.0.16:5000/removefriendrequest",{method:"POST",headers:l,credentials:"same-origin",body:JSON.stringify(n)}).then((function(e){return console.log("RemoveFriendRequest: ",e),e}))}(e.valueUser,t)};return Object(s.jsxs)("div",{className:"friendRequests",children:[Object(s.jsxs)("span",{children:[e.name," ",e.date," "]}),Object(s.jsx)("button",{type:"button",onClick:function(){n(e.name)},className:"friendRequestButton button",children:" \u292c "}),Object(s.jsx)("button",{type:"button",onClick:function(){t(e.name)},className:"friendRequestButton button",children:" \u2713 "})]})},h=function(e){var t=function(e){var t=Object(o.useState)({requests:null,loading:!0}),n=Object(i.a)(t,2),s=n[0],c=n[1];return Object(o.useEffect)((function(){var t={name:e};console.log("GetFriendRequests: bodyContent: ",t),c((function(e){return{requests:e.requests,loading:!0}})),fetch("http://localhost:5000/getfriendrequests",{method:"POST",headers:l,credentials:"same-origin",body:JSON.stringify(t)}).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){console.log("GetFriendRequests: json data: ",e),c({requests:e,loading:!1})}))}),[]),s}(e.valueUser).requests;return console.log("FriendRequests: data: ",t,e.valueUser),Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:" Friend requests "}),null==t?"Loading":0==t.length?"No requests":t.map((function(t){return Object(s.jsxs)("div",{children:[" ",Object(s.jsx)(O,{valueUser:e.valueUser,name:t.name,date:t.date})," "]})}))]})},m=function(e){var t="null"===localStorage.getItem("user"),n=localStorage.getItem("user"),c=Object(o.useState)(!1),r=Object(i.a)(c,2),a=r[0],l=r[1],u=Object(o.useState)(!t),d=Object(i.a)(u,2),g=d[0],j=d[1];e.storeUser(n);var O=function(){l(!a)},m=function(){j(!g)};return a?(console.log("Login: alreadySent, storedUser: ",g,n),g&&"undefined"!==n?Object(s.jsxs)("div",{className:"loginDiv",children:[Object(s.jsx)("div",{className:"loginToggleDiv",children:Object(s.jsx)("button",{type:"button",onClick:O,className:"loginToggle",children:"\ud83d\udc64"})}),Object(s.jsxs)("div",{className:"logins",children:[Object(s.jsx)(f,{toggleFriendAdded:e.toggleFriendAdded,setNewFriend:e.setNewFriend,user:e.valueUser}),Object(s.jsx)("div",{className:"friendAdd",children:Object(s.jsx)("button",{className:"logoutButton button",onClick:function(){localStorage.removeItem("user"),e.logOut(),m()},children:"Logout"})}),Object(s.jsx)(h,{valueUser:e.valueUser})]})]}):Object(s.jsxs)("div",{className:"loginDiv",children:[Object(s.jsx)("div",{className:"loginToggleDiv",children:Object(s.jsx)("button",{type:"button",onClick:O,className:"loginToggle",children:"\ud83d\udc64"})}),Object(s.jsx)(b,{login:e.login,saveUser:e.saveUser,valueUser:e.valueUser,toggleAlreadySet:m}),Object(s.jsx)(f,{setNewFriend:e.setNewFriend}),Object(s.jsx)(h,{valueUser:e.valueUser})]})):Object(s.jsx)("div",{className:"loginToggleDiv",children:Object(s.jsx)("button",{type:"button",onClick:O,className:"loginToggle",children:"\ud83d\udc64"})})};var v=function(e){var t=u(e.name).picture;return console.log("Friend: picturea",t),Object(s.jsx)("div",{className:"friend",onClick:function(){e.setReceiver(e.name)},children:Object(s.jsxs)("h3",{children:[" ",e.name," ",Object(s.jsx)("img",{className:"friendPicture",src:t})]})})},x=function(e){e.setReceiver(e.valueReceiver);var t=function(e,t){var n=Object(o.useState)({friends:null}),s=Object(i.a)(n,2),c=s[0],r=s[1];return Object(o.useEffect)((function(){var t={name:e};r((function(e){return{data:e.data}})),fetch("http://192.168.0.16:5000/getfriends",{method:"POST",headers:l,credentials:"same-origin",body:JSON.stringify(t)}).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){console.log("GetFriends: ",e),r({friends:e})}))}),[e,t]),c}(e.valueUser,e.friendAdded).friends;return console.log("Friends: ",t),Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:"currentUser",children:e.valueUser}),Object(s.jsxs)("div",{children:[" ",t?t.map((function(t){return Object(s.jsx)(v,{name:t,setReceiver:e.setReceiver})})):"Loading friends"," "]})]})},p=n(7),N=function(e){var t=Object(o.useState)({x:0,y:0}),n=Object(i.a)(t,2),c=n[0],r=n[1],a=Object(o.useState)(1),l=Object(i.a)(a,2),u=l[0],d=l[1],g=Object(o.useCallback)((function(t,n){console.log(n),e.handleAreaToCrop(n)}),[]);return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"crop-container",children:Object(s.jsx)(p.a,{image:e.image,crop:c,zoom:u,aspect:1,onCropChange:r,onCropComplete:g,onZoomChange:d})}),Object(s.jsx)("div",{className:"controls"})]})},S=function(e){var t=Object(o.useState)(null),n=Object(i.a)(t,2),c=n[0],r=n[1],d=Object(o.useState)(!1),g=Object(i.a)(d,2),j=g[0],f=g[1],b=Object(o.useState)({}),O=Object(i.a)(b,2),h=O[0],m=O[1],v=u(e.valueUser).picture;Object(o.useEffect)((function(){null!=e.valueUser&&r(v)}),[v]);var x=function(){console.log("Logo: imageOnClick: modal",!1),f(!1)};return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"overlay ".concat(j?"overlayActive":""),onClick:x}),Object(s.jsx)("img",{src:c,onClick:function(){console.log("Logo: imageOnClick: modal",!0),f(!0)},className:"profileImage"}),Object(s.jsxs)("div",{className:"modal ".concat(j?"modalActive":""),children:[Object(s.jsxs)("div",{className:"modalHeader",children:[Object(s.jsx)("h3",{children:" Resise your image "}),Object(s.jsx)("button",{type:"button",className:"closeHeaderButton",onClick:x,children:"\xd7"})]}),Object(s.jsxs)("div",{className:"modalBody",children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0],n=new FileReader;console.log("Logo: image",t),n.readAsDataURL(t),n.onload=function(e){var t=e.target.result;console.log(t),r(t)}},className:"changeProfileImage uploadImageInput",name:"image"}),Object(s.jsx)("button",{type:"button",className:"sendFile",onClick:function(){!function(e,t,n){var s={name:e,image:t,areatocrop:n};console.log("UploadProfileImage",s),fetch(a+"uploadprofileimage",{method:"POST",headers:l,credentials:"same-origin",body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){return console.log("PostRequest: ",e),e}))}(e.valueUser,c,h)},children:"Upload File"})]}),Object(s.jsx)("div",{className:"croper",children:Object(s.jsx)(N,{handleAreaToCrop:function(e){console.log(e),m(e)},image:c})})]})]})]})},y=function(){var e=Object(o.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(o.useState)(""),a=Object(i.a)(r,2),u=a[0],g=a[1],f=Object(o.useState)(!1),b=Object(i.a)(f,2),O=b[0],h=b[1],v=function(e){localStorage.setItem("user",e),c(e)};return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"app",children:[Object(s.jsxs)("div",{className:"friends",children:[Object(s.jsx)(S,{valueUser:n,valueReciever:u}),Object(s.jsx)(x,{friendAdded:O,valueUser:n,setReceiver:function(e){g(e)},valueReceiver:u})]}),Object(s.jsxs)("div",{className:"messages",children:[Object(s.jsx)(j,{valueUser:n,sender:n,receiver:u}),Object(s.jsx)(d,{valueUser:n,receiver:u})]}),Object(s.jsxs)("div",{className:"float",children:[Object(s.jsx)(m,{login:function(e){v(e)},logOut:function(){console.log("App: logOut"),c(void 0)},toggleFriendAdded:function(){h(!O)},storeUser:v,saveUser:function(e,t){v(e),function(e,t){var n={name:e,pass:t,friends:[],friendRequests:[],profileImage:""};console.log("AddUser: bodyContent: ",n),fetch("http://192.168.0.16:5000/adduser",{method:"POST",headers:l,credentials:"same-origin",body:JSON.stringify(n)}).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){return console.log("AddUser: ",e),e}))}(e,t)},valueUser:n}),"  "]})]})})},U=n(6),C=n.n(U);r.a.render(Object(s.jsx)(y,{}),document.getElementById("root")),C()()},6:function(e,t,n){"use strict";t.__esModule=!0;t.default=function(e){e&&e instanceof Function&&Promise.resolve().then((function(){return n(19)})).then((function(t){var n=t.getCLS,s=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),s(e),o(e),c(e),r(e)}))}}},[[20,1,2]]]);
//# sourceMappingURL=main.91fb2700.chunk.js.map